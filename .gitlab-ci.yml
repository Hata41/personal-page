image: node:22

# GitLab CI configuration to build and deploy the Astro + React site

pages:
  cache:
    paths:
      - node_modules/
  script:
    # Install project dependencies (Astro, React, MDX, etc.)
    - npm install
    # Build the static site into the `dist/` directory
    - npm run build
    # Clean any existing public directory
    - rm -rf public
    # GitLab Pages serves files from a folder named `public`
    - mv dist public
  artifacts:
    paths:
      - public
  only:
    # Adjust this to match the branch you use for deployment (e.g. main or master)
    - main
